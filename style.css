/* Replaced responsive style.css
   Drop this file in place of your current style.css
   (I checked your original files while editing). 
   Sources: :contentReference[oaicite:2]{index=2} :contentReference[oaicite:3]{index=3}
*/

* { margin: 0; padding: 0; box-sizing: border-box; }

:root{
  --scene-height: 100vh;
  --max-couple-width: 520px;
  --bubble-bg: rgba(18,20,32,0.9);
  --bubble-border: rgba(200,200,200,0.45);
  --muted: rgba(255,255,255,0.75);
}

/* Page */
html,body { height: 100%; }
body{
  background: #000;
  color: #fff;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  overflow: hidden;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* SCENE container */
.scene{
  position: relative;
  width: 100%;
  height: var(--scene-height);
  overflow: hidden;
}

/* SKY VIDEO */
.scene video{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 1;
  pointer-events: none;
}

/* DARK OVERLAY (fades when 'full moon' triggers) */
.night-overlay{
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at top, rgba(0,0,0,0.92), #000 60%);
  opacity: 0.88;
  transition: opacity 2.2s ease;
  z-index: 2;
}
.night-overlay.fade-out{ opacity: 0.25; }

/* STARS */
.stars{ position: absolute; inset: 0; z-index: 3; pointer-events: none; }
.star{
  position: absolute; width: 2px; height: 2px; border-radius: 50%;
  background: #fff; opacity: 0; animation: twinkle 3s infinite ease-in-out;
  animation-delay: var(--delay);
}

/* MOON */
.moon{
  position: absolute;
  top: 14vh;
  left: 50%;
  transform: translateX(-50%) scale(0.95);
  width: 120px; height: 120px;
  background: radial-gradient(circle at 30% 30%, #fff, #e9e9e9 50%, #bbb 80%, transparent);
  border-radius: 50%;
  opacity: 0;
  transition: opacity 2s ease, transform 2s ease;
  z-index: 4;
  box-shadow: 0 0 25px rgba(255,255,255,0.85);
}
.moon.visible{ opacity: 1; transform: translateX(-50%) scale(1); }

/* COUPLE (centered and responsive) */
.couple{
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: min(72vw, var(--max-couple-width));
  max-height: 62vh;
  height: auto;
  z-index: 5;
  pointer-events: none;
  image-rendering: optimizeSpeed;
}

/* DIALOGUE - positioned above the couple with responsive offsets */
.dialogue{
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: clamp(22vh, 28vh, 34vh); /* keeps it close to the couple on small screens */
  width: min(92vw, 880px);
  z-index: 6;
  text-align: center;
  pointer-events: none; /* tap area handles clicks */
}

/* container for the single visible line (keeps small height) */
#lineContainer{
  position: relative;
  height: 110px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  pointer-events: none;
}

/* BUBBLE shared styling */
.line{
  position: absolute;
  bottom: 0;
  max-width: 280px;
  padding: 10px 14px;
  border-radius: 16px;
  font-size: clamp(0.9rem, 1.8vw, 1.15rem);
  border: 1px solid var(--bubble-border);
  backdrop-filter: blur(10px);
  opacity: 0;
  pointer-events: none;
  line-height: 1.15;
  word-break: keep-all;
  box-shadow: 0 6px 18px rgba(0,0,0,0.45);
}

/* HER (left bubble) - positioned relative to center */
.line.her{
  left: calc(50% - 210px); /* move left of center */
  background: linear-gradient(180deg, rgba(10,15,30,0.95), rgba(8,12,24,0.92));
  animation: slideInHer 0.58s forwards ease-out;
}

/* ME (right bubble) */
.line.me{
  left: calc(50% + 20px); /* move right of center */
  background: linear-gradient(180deg, rgba(18,18,32,0.95), rgba(14,14,28,0.92));
  animation: slideInMe 0.58s forwards ease-out;
}

/* Narration bubble (centered) */
.line.narrator{
  position: static;
  margin: 0 auto;
  margin-top: -2.6vh;
  border-style: dashed;
  text-align: center;
  background: rgba(20,20,35,0.66);
  animation: fadeUp 0.7s forwards ease-out;
  max-width: 68vw;
  font-size: clamp(0.95rem, 1.6vw, 1.1rem);
}

/* Speaker label */
.speaker{
  display: block;
  font-size: 0.72rem;
  opacity: 0.75;
  margin-bottom: 6px;
  color: var(--muted);
}

/* HINT text showing 'tap to continue' */
.hint{
  margin-top: 10px;
  opacity: 0.78;
  font-size: 0.82rem;
  pointer-events: none;
}
.hint.hidden{ opacity: 0; transition: opacity .3s ease; }

/* REPLY AREA (shown only when needed) */
.reply-area{
  margin-top: 18px;
  max-width: 460px;
  margin-inline: auto;
  padding: 12px;
  background: rgba(12,16,26,0.94);
  border-radius: 14px;
  border: 1px solid rgba(140,150,180,0.22);
  display: none;
  pointer-events: auto; /* enable interaction for inputs */
}
.reply-area.show{ display: block; }

.reply-label{ font-size: 0.78rem; opacity: 0.82; margin-bottom: 8px; }

.reply-row{ display:flex; gap:8px; }

#replyInput{
  flex:1;
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(6,8,14,0.9);
  border: 1px solid rgba(130,130,160,0.18);
  color: #fff;
  outline: none;
  font-size: 0.98rem;
}
#replyInput:focus{ box-shadow: 0 0 0 3px rgba(75,83,224,0.12); }

#replyBtn{
  padding: 9px 14px;
  border-radius: 999px;
  background: #4b53e0;
  color: #fff;
  border: none;
  cursor: pointer;
  font-weight: 600;
}
#replyInput.shake{ animation: shake 0.32s linear; }

.reply-hint{ margin-top: 8px; font-size: 0.72rem; opacity: 0.7; }

/* REPLAY BUTTON */
.replay-btn{
  position: absolute;
  bottom: 12vh;
  left: 50%;
  transform: translateX(-50%) translateY(10px);
  padding: 8px 18px;
  border-radius: 999px;
  background: rgba(10,15,30,0.88);
  border: 1px solid rgba(200,200,255,0.5);
  color: #fff;
  opacity: 0;
  pointer-events: none;
  transition: 0.28s ease;
  z-index: 6;
}
.replay-btn.show{ opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0); }

/* TAP AREA covers whole screen to register taps */
.tap-area{ position: absolute; inset: 0; z-index: 10; cursor: pointer; }

/* Small-screen tweaks */
@media (max-width: 640px){
  /* bring dialogue closer to couple on phones */
  .dialogue{ bottom: 18vh; width: 96vw; }
  #lineContainer{ height: 100px; align-items: flex-end; }

  .line{ max-width: 220px; font-size: 0.98rem; padding: 9px 12px; }
  .line.her{ left: calc(50% - 170px); }
  .line.me{ left: calc(50% + 8px); }

  .moon{ top: 17vh; width: 90px; height: 90px; }
  .couple{ width: min(86vw, 460px); max-height: 58vh; }
  .reply-area{ max-width: 95vw; padding: 10px; }
}

/* Larger screens */
@media (min-width: 900px){
  .dialogue{ bottom: 30vh; }
  .line{ max-width: 320px; }
  .line.her{ left: calc(50% - 300px); }
  .line.me{ left: calc(50% + 40px); }
  #lineContainer{ height: 120px; }
}

/* Animations (kept from original, tweaked timing) */
@keyframes slideInHer{
  from{ opacity: 0; transform: translateY(8px) translateX(-2px); }
  to{ opacity: 1; transform: translateY(0) translateX(0); }
}
@keyframes slideInMe{
  from{ opacity: 0; transform: translateY(8px) translateX(2px); }
  to{ opacity: 1; transform: translateY(0) translateX(0); }
}
@keyframes fadeUp{
  from{ opacity: 0; transform: translateY(8px); }
  to{ opacity: 1; transform: translateY(0); }
}
@keyframes twinkle{
  0%,100%{ opacity: 0; } 50%{ opacity: 1; }
}
@keyframes shake{
  0%{ transform: translateX(0); } 25%{ transform: translateX(-4px); }
  50%{ transform: translateX(4px); } 75%{ transform: translateX(-4px); } 100%{ transform: translateX(0); }
}
